# ZenPulse: AI Meditation App

Мобильное приложение для медитаций с AI-генерацией персональных аффирмаций и системой подписок.

## Стек технологий

- **Framework**: React Native + Expo
- **Навигация**: React Navigation (Native Stack)
- **UI**: React Native, Expo Linear Gradient
- **Управление состоянием**: React Context API

## Функциональность

### 1. Экран Paywall (Подписка)
- Премиум дизайн с градиентами и анимациями
- Список из 6 преимуществ Premium-версии
- Два тарифных плана (Месячный и Годовой)
- Визуальное выделение выгодного предложения (Годовая подписка)
- Кнопка "Попробовать бесплатно 7 дней" с имитацией покупки
- Полная адаптивность под разные размеры экранов (от iPhone SE до iPad Pro)

### 2. Экран медитаций (Главный экран)
- 6 медитационных сессий с карточками
- 2 бесплатные медитации
- 4 премиум медитации (заблокированы для неподписанных)
- Логика блокировки: при клике на премиум-контент происходит редирект на Paywall
- Кнопка "AI Настрой дня" для перехода к AI-фиче
- Адаптивная сетка (на планшетах 2 колонки, на телефонах 1 колонка)

### 3. AI Настрой дня
- Выбор настроения из 3 вариантов (Радостный, Спокойный, В стрессе)
- Имитация генерации аффирмации через "API вызов" (2 секунды)
- Уникальные аффирмации для каждого настроения
- Красивая анимация загрузки
- Возможность попробовать снова или вернуться к медитациям

## Как запустить проект

### Предварительные требования
- Node.js (v16 или выше)
- npm или yarn
- Expo Go приложение на мобильном устройстве (опционально)

### Установка

```bash
# Клонировать репозиторий
git clone https://github.com/Maneru31/internship.git

# Перейти в директорию
cd internship

# Установить зависимости
npm install

# Запустить проект
npm start
```

### Запуск на разных платформах

```bash
# Android эмулятор
npm run android

# iOS симулятор (только на macOS)
npm run ios

# Web браузер
npm run web

# Expo Go (сканировать QR код)
npm start
```

## Структура проекта

```
internship/
├── screens/
│   ├── PaywallScreen.js      # Экран подписки
│   ├── MeditationsScreen.js  # Список медитаций
│   └── AIMoodScreen.js        # AI генерация аффирмаций
├── components/
│   ├── MeditationCard.js     # Карточка медитации
│   └── PricingCard.js        # Карточка тарифа
├── context/
│   └── SubscriptionContext.js # Управление подпиской
├── App.js                     # Главный файл с навигацией
└── package.json
```

## Работа с AI: Реальный опыт разработки

### "С какими специфическими проблемами мобильной верстки ИИ справляется хуже всего и как ты контролировал его работу,чтобы приложение не сломалось на маленьких экранах (iPhone SE vs Pro Max)?"

Приложение разрабатывалось с использованием Claude Code (AI-ассистент). Я выступал в роли архитектора и QA, направляя AI и проверяя результат. Вот реальные проблемы, которые возникли в процессе.

### Проблемы, обнаруженные при тестировании:

#### 1. Бейдж "САМОЕ ВЫГОДНОЕ" налезал на заголовок

**Проблема:** На экране Paywall бейдж с текстом "САМОЕ ВЫГОДНОЕ ✨" налезал на заголовок "Годовая подписка".

**Причина:** AI сделал карточки подписок слишком большими, а бейдж позиционировался с `top: -12px` без учета отступа сверху.

**Решение:** Указал AI:
- Уменьшить размеры карточек (padding 20→16px, шрифты меньше)
- Добавить `marginTop: 20px` для карточки с популярным бейджем
- Уменьшить сам бейдж

```javascript
popularCard: {
  borderColor: '#FFD700',
  marginTop: 20,  // Добавлено после моего замечания
},
```

#### 2. Сетка медитаций на планшетах

**Проблема:** На iPad все карточки медитаций выстраивались по центру в одну колонку, оставляя огромные пустые пространства по бокам.

**Что увидел:** Карточки шириной ~350px просто центрировались, вместо того чтобы использовать доступное пространство.

**Решение:** Попросил AI переделать на адаптивную сетку 2x2 для планшетов:

```javascript
// Было (AI):
const CARD_WIDTH = width - 40;

// Стало (после моей корректировки):
const CARD_WIDTH = isTablet ? (width - 80 - 16) / 2 : width - 40;

// В стилях сетки добавил gap:
grid: {
  flexDirection: 'row',
  flexWrap: 'wrap',
  justifyContent: isTablet ? 'space-between' : 'center',
  gap: isTablet ? 16 : 0,  // Добавлено
}
```

#### 3. Логика демонстрации блокировки

**Проблема:** После "покупки" подписки все медитации разблокировались, но не было способа вернуться в состояние "без подписки" для демонстрации функции блокировки (как требовалось в ТЗ).

**Решение:** Попросил AI добавить:
- Функцию `unsubscribe()` в SubscriptionContext
- Кнопку "Демо: Сбросить" в заголовке MeditationsScreen (появляется когда подписан)
- При клике подписка отменяется → можно снова увидеть замки на карточках

Теперь можно циклически демонстрировать: Подписка → Все открыто → Сброс → Замки → Клик на замок → Paywall

#### 4. SafeArea и навигация

**Что проверял:** Правильность реализации SafeArea для корректного отображения на iPhone с челкой.

**Что AI сделал правильно сразу:**
- Использовал `SafeAreaView` из `react-native-safe-area-context`
- Правильная структура: `LinearGradient > SafeAreaView > ScrollView`
- Параметр `edges={['top', 'bottom']}`

**Проблема при проверке:** В web версии (браузер) челка не эмулируется, даже с включенным "Show device frame" в DevTools. Это ограничение React Native web.

**Как убедился что работает:**
- Проверил код - структура правильная
- SafeAreaView корректно обернут во всех 3 экранах
- В production на реальном iPhone будет работать

### Мой процесс контроля:

1. **Давал AI задание** (например: "создай Paywall экран")
2. **Проверял результат** в браузере на разных разрешениях:
   - iPhone SE (375px)
   - iPhone 14 Pro (393px)
   - iPad Pro (1024px)
3. **Находил проблемы** (налезание, неправильная сетка, и т.д.)
4. **Указывал AI на проблему** с конкретным описанием
5. **AI исправлял** → коммитил
6. **Проверял снова**

### Инструменты:

- **Chrome DevTools** - device toolbar для эмуляции устройств
- **Expo Dev Server** - live reload при изменениях
- **Git** - проверка истории изменений

### Чему научился работая с AI:

**AI отлично справляется с:**
- ✅ Создание базовой структуры и компонентов
- ✅ Навигация (React Navigation setup)
- ✅ Context API для состояния
- ✅ Стилизация (gradients, layouts)

**Где AI нужен контроль:**
- ⚠️ Адаптивность под разные экраны (забывает про планшеты)
- ⚠️ Визуальные конфликты (наложения элементов)
- ⚠️ Edge cases (как показать функцию без reset)
- ⚠️ Тестирование (не может проверить на реальном устройстве)

**Мой вывод:** AI - мощный инструмент для быстрой разработки, но требует человека-архитектора, который:
- Проверяет результат на разных устройствах
- Находит визуальные баги
- Направляет AI на исправления
- Думает об UX и edge cases

Без контроля получится "работает в основном сценарии", с контролем - production-ready приложение.

## AI Integration

В данном проекте AI используется для генерации персональных аффирмаций на основе настроения пользователя. В текущей версии используется мок-реализация с предварительно написанными текстами, но архитектура позволяет легко интегрировать реальный LLM API (OpenAI, Claude, и т.д.).

### Как интегрировать реальный AI:

Заменить функцию `generateAffirmation` в `screens/AIMoodScreen.js`:

```javascript
const generateAffirmation = async (mood) => {
  setIsGenerating(true);

  const prompt = `Create a personalized meditation affirmation for someone feeling ${mood.label}.
  Make it calming, positive, and about 3-4 sentences long. In Russian language.`;

  const response = await fetch('https://api.openai.com/v1/chat/completions', {
    method: 'POST',
    headers: {
      'Authorization': `Bearer ${YOUR_API_KEY}`,
      'Content-Type': 'application/json',
    },
    body: JSON.stringify({
      model: 'gpt-4',
      messages: [{ role: 'user', content: prompt }],
    }),
  });

  const data = await response.json();
  setAffirmation(data.choices[0].message.content);
  setIsGenerating(false);
};
```

## Лицензия

MIT

## Автор

Создано как тестовое задание для стажировки
