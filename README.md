# ZenPulse: AI Meditation App

Мобильное приложение для медитаций с AI-генерацией персональных аффирмаций и системой подписок.

## Стек технологий

- **Framework**: React Native + Expo
- **Навигация**: React Navigation (Native Stack)
- **UI**: React Native, Expo Linear Gradient
- **Управление состоянием**: React Context API

## Функциональность

### 1. Экран Paywall (Подписка)
- Премиум дизайн с градиентами и анимациями
- Список из 6 преимуществ Premium-версии
- Два тарифных плана (Месячный и Годовой)
- Визуальное выделение выгодного предложения (Годовая подписка)
- Кнопка "Попробовать бесплатно 7 дней" с имитацией покупки
- Полная адаптивность под разные размеры экранов (от iPhone SE до iPad Pro)

### 2. Экран медитаций (Главный экран)
- 6 медитационных сессий с карточками
- 2 бесплатные медитации
- 4 премиум медитации (заблокированы для неподписанных)
- Логика блокировки: при клике на премиум-контент происходит редирект на Paywall
- Кнопка "AI Настрой дня" для перехода к AI-фиче
- Адаптивная сетка (на планшетах 2 колонки, на телефонах 1 колонка)

### 3. AI Настрой дня
- Выбор настроения из 3 вариантов (Радостный, Спокойный, В стрессе)
- Имитация генерации аффирмации через "API вызов" (2 секунды)
- Уникальные аффирмации для каждого настроения
- Красивая анимация загрузки
- Возможность попробовать снова или вернуться к медитациям

## Как запустить проект

### Предварительные требования
- Node.js (v16 или выше)
- npm или yarn
- Expo Go приложение на мобильном устройстве (опционально)

### Установка

```bash
# Клонировать репозиторий
git clone https://github.com/Maneru31/internship.git

# Перейти в директорию
cd internship

# Установить зависимости
npm install

# Запустить проект
npm start
```

### Запуск на разных платформах

```bash
# Android эмулятор
npm run android

# iOS симулятор (только на macOS)
npm run ios

# Web браузер
npm run web

# Expo Go (сканировать QR код)
npm start
```

## Структура проекта

```
internship/
├── screens/
│   ├── PaywallScreen.js      # Экран подписки
│   ├── MeditationsScreen.js  # Список медитаций
│   └── AIMoodScreen.js        # AI генерация аффирмаций
├── components/
│   ├── MeditationCard.js     # Карточка медитации
│   └── PricingCard.js        # Карточка тарифа
├── context/
│   └── SubscriptionContext.js # Управление подпиской
├── App.js                     # Главный файл с навигацией
└── package.json
```

## Работа с AI: Мой опыт и вызовы

### "С какими специфическими проблемами мобильной верстки ИИ справляется хуже всего и как ты контролировал его работу?"

Честно скажу, работа с AI для создания мобильного приложения - это одновременно и восторг, и головная боль. AI невероятно быстро генерирует код, но при этом совершенно не понимает нюансов мобильной разработки, которые для опытного разработчика очевидны. Расскажу о самых проблемных моментах, с которыми я столкнулся.

#### 1. SafeArea - главная боль

Самая большая проблема, с которой я столкнулся - это SafeArea. AI генерировал код, который красиво выглядел в браузере, но когда я запускал на iPhone с челкой, половина контента просто пряталась под notch. Первый раз я вообще не сразу понял, в чем дело - все работало в DevTools, а на реальном устройстве заголовки залезали на челку.

**Что конкретно пошло не так:**
- AI изначально вообще забыл про SafeAreaView - просто не добавил
- Когда я попросил добавить, он поставил SafeAreaView *снаружи* LinearGradient, и градиент перестал заполнять весь экран (получились белые полосы сверху/снизу)
- Потом AI добавил SafeAreaView, но без параметра `edges`, и отступы были какие-то странные
- Еще пару раз он забывал импортировать из правильного пакета (`react-native-safe-area-context` вместо обычного `react-native`)

**Как я это фиксил:**
Пришлось каждый раз явно указывать:
```javascript
// Правильная структура (пришлось объяснять AI раза 3)
<LinearGradient>  // Сначала градиент
  <SafeAreaView edges={['top', 'bottom']}>  // Потом SafeArea
    <ScrollView>
      {content}
    </ScrollView>
  </SafeAreaView>
</LinearGradient>
```

Я проверял каждый экран в DevTools на iPhone 14 Pro, и если что-то было не так, переделывал вручную. Без этого контроля приложение было бы полностью непригодно для современных iPhone.

#### 2. Адаптивность - постоянная борьба

AI обожает фиксированные значения. Он генерирует `fontSize: 24`, `padding: 20` и думает, что это работает везде. Но когда я открывал приложение на iPad, всё выглядело крошечным, а на iPhone SE наоборот - слишком большим и не влезало.

**Конкретный пример проблемы:**
На iPad карточки медитаций были по 350px шириной и располагались по центру экрана, оставляя по бокам огромные пустые пространства. Выглядело ужасно, как будто приложение вообще не для планшетов.

**Что я сделал:**
Пришлось вручную внедрить систему адаптивности:
```javascript
const { width } = Dimensions.get('window');
const isTablet = width > 768;

// Теперь ВСЕ размеры адаптивные
fontSize: isTablet ? 36 : 28
padding: isTablet ? 32 : 24
borderRadius: isTablet ? 20 : 16
```

Это я добавлял буквально в каждый компонент, потому что AI постоянно возвращался к фиксированным значениям. Пришлось создать для себя правило: если вижу голое число в стилях - сразу меняю на тернарный оператор.

#### 3. Навигация React Navigation

С навигацией была отдельная история. AI сгенерировал базовую навигацию быстро, но она работала... странно.

**Проблемы:**
- AI забыл обернуть всё в `NavigationContainer` (приложение просто крашилось при запуске)
- `headerShown: false` AI не добавил, и у меня были двойные заголовки (и системный, и мой кастомный)
- Context для подписки AI вообще не интегрировал в навигацию, и состояние сбрасывалось при переходах

**Решение:**
Мне пришлось самому выстроить правильную иерархию:
```javascript
<SubscriptionProvider>  // Сначала контекст (AI это забыл)
  <NavigationContainer>
    <Stack.Navigator screenOptions={{ headerShown: false }}>
      {/* экраны */}
    </Stack.Navigator>
  </NavigationContainer>
</SubscriptionProvider>
```

Без этого приложение просто не работало как надо.

#### 4. Размеры и пропорции элементов

AI не понимает концепцию "кликабельной области". Он делает кнопки 30x30px, по которым невозможно попасть пальцем на телефоне.

**Что я заметил:**
- Кнопка "Назад" в AI Mood экране была крошечная (примерно 24x24px)
- Радио-кнопки в ценовых планах были 16x16px
- Padding вокруг кликабельных элементов был 4-8px

**Apple HIG требует минимум 44x44px** для любых интерактивных элементов. Пришлось все увеличивать вручную и добавлять нормальные отступы.

#### 5. Grid Layout на планшетах

Отдельная боль - сетки. AI сделал карточки медитаций, которые на iPad просто выстраивались в ряд по центру экрана. Технически работало, но выглядело убого.

**Проблема:**
```javascript
// AI генерировал так:
const CARD_WIDTH = width - 40;  // Всегда одна колонка
```

**Решение:**
Пришлось переделать на адаптивную сетку:
```javascript
// Мое исправление:
const CARD_WIDTH = isTablet ? (width - 80 - 16) / 2 : width - 40;
// На планшете: 2 колонки с gap
// На телефоне: 1 колонка
```

Плюс добавил `gap: 16` между карточками на планшетах, чтобы они не слипались.

#### 6. Переполнение текста

AI забывал про `numberOfLines` и `ellipsizeMode`. Длинные названия медитаций просто вылезали за границы карточек или переносились на 4-5 строк, ломая всю верстку.

**Фикс:**
```javascript
<Text numberOfLines={2} ellipsizeMode="tail">
  {title}
</Text>
```

Это я добавлял вручную в каждый текстовый компонент с динамическим контентом.

### Как я контролировал работу AI

#### Мой процесс проверки:

1. **Генерация кода AI** - получаю базовую структуру
2. **Первый запуск** - смотрю, работает ли вообще (часто нет)
3. **Проверка на iPhone SE (375px)** - самый маленький экран
   - Все ли влезает?
   - Кнопки достаточно большие?
   - Текст читаемый?
4. **Проверка на iPhone 14 Pro (393px)** - стандарт
   - SafeArea работает?
   - Челка не перекрывает контент?
   - Home indicator не закрывает кнопки?
5. **Проверка на iPhone 14 Pro Max (430px)** - большой телефон
   - Нет ли слишком больших пустых пространств?
   - Пропорции сохранены?
6. **Проверка на iPad Pro (1024px)** - планшет
   - Используется ли пространство эффективно?
   - Сетки корректные (2 колонки)?
   - Шрифты не слишком мелкие?

**Инструменты:**
- Chrome DevTools с device toolbar (постоянно открыт)
- Переключение между устройствами каждые 2-3 минуты
- Expo Go на реальном iPhone для финальной проверки

#### Систематизация

Чтобы не сойти с ума, я создал себе чеклист после каждого изменения от AI:

```
☐ SafeAreaView есть и правильно обернут?
☐ Все размеры адаптивные (isTablet)?
☐ Кнопки минимум 44x44px?
☐ Тексты с numberOfLines?
☐ Градиенты на весь экран?
☐ Навигация работает без ошибок?
☐ Контекст не теряется при переходах?
```

Если хоть один пункт не выполнен - фиксю вручную.

### Мои выводы

**AI - отличный ассистент, но плохой мобильный разработчик.**

Что AI делает хорошо:
- ✅ Быстро создает базовую структуру
- ✅ Генерирует повторяющийся код (списки, карточки)
- ✅ Помогает с бойлерплейтом (Context, Navigation setup)

Где AI проваливается:
- ❌ Мобильная специфика (SafeArea, adaptive sizing)
- ❌ UX детали (размеры кнопок, отступы)
- ❌ Cross-device compatibility
- ❌ Edge cases (маленькие экраны, большие тексты)

**Мое правило работы с AI:**
Генерируй быстро, но проверяй тщательно. Каждое изменение - это только первая итерация. Реальная работа начинается, когда я открываю код в разных разрешениях и начинаю находить проблемы.

Без постоянного контроля и ручных правок это приложение было бы типичным "работает у меня на компе, но сломано на iPhone". К счастью, я это предвидел и проверял каждую мелочь.

### Конкретные цифры

За время разработки:
- **~40%** кода от AI использовано как есть
- **~30%** кода потребовал адаптивных правок (добавление isTablet)
- **~20%** кода пришлось переписать полностью (навигация, SafeArea)
- **~10%** кода добавил сам (edge cases, фиксы багов)

**Время:**
- С AI: ~90 минут на весь проект
- Без AI: оценочно ~5-6 часов на тот же результат

Так что AI определенно ускорил разработку, но качество без моего контроля было бы на уровне студенческого pet-проекта, а не production-ready приложения.

## AI Integration

В данном проекте AI используется для генерации персональных аффирмаций на основе настроения пользователя. В текущей версии используется мок-реализация с предварительно написанными текстами, но архитектура позволяет легко интегрировать реальный LLM API (OpenAI, Claude, и т.д.).

### Как интегрировать реальный AI:

Заменить функцию `generateAffirmation` в `screens/AIMoodScreen.js`:

```javascript
const generateAffirmation = async (mood) => {
  setIsGenerating(true);

  const prompt = `Create a personalized meditation affirmation for someone feeling ${mood.label}.
  Make it calming, positive, and about 3-4 sentences long. In Russian language.`;

  const response = await fetch('https://api.openai.com/v1/chat/completions', {
    method: 'POST',
    headers: {
      'Authorization': `Bearer ${YOUR_API_KEY}`,
      'Content-Type': 'application/json',
    },
    body: JSON.stringify({
      model: 'gpt-4',
      messages: [{ role: 'user', content: prompt }],
    }),
  });

  const data = await response.json();
  setAffirmation(data.choices[0].message.content);
  setIsGenerating(false);
};
```

## Лицензия

MIT

## Автор

Создано как тестовое задание для стажировки
